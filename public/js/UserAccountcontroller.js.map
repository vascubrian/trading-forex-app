{"version":3,"sources":["utils/index.js","UserAccountcontroller.js"],"names":["parseJwt","base64Url","base64","document","querySelector","getAttribute","split","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","checkUsersOnline","sessionData","userEmail","userStatus","stringify","indexOf","checkFileAttachment","messageBody","fileName","autoFileName","checkFileExtension","test","pop","startPlaySound","smsNumbers","parseInt","playNotificationSound","audioFile","Audio","play","videoCheckUser","textObject","$","username","password","urlBase","registerUsers","email","val","fullName","userPassword","confirmPassword","contact","userType","facility","recommendedBy","length","html","prop","ajax","url","method","contentType","crossDomain","xhrFields","withCredentials","beforeSend","xhr","setRequestHeader","btoa","data","success","response","window","location","href","encodeURIComponent","error","err","eval","responseText","message","loginUser","keypress","event","e","key","which","click","jQuery"],"mappings":";AA4DC,aA5DM,SAASA,IACRC,IACAC,EADYC,SAASC,cAAc,yBAAyBC,aAAa,WAAWC,MAAM,KAAK,GAC5EC,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KACpDC,EAAcC,mBAAmBC,KAAKR,GAAQI,MAAM,IAAIK,IAAI,SAAUC,GACnE,MAAA,KAAO,KAAOA,EAAEC,WAAW,GAAGC,SAAS,KAAKC,OAAO,KACzDC,KAAK,KACDC,OAAAA,KAAKC,MAAMV,GAGb,SAASW,EAAkBC,EAAaC,GACzCC,IAAAA,EAAaL,KAAKC,MAAM,6DAKrBI,OAJYL,KAAKM,UAAUH,GACnBI,QAAQ,MAAQH,EAAY,QAAU,IACnDC,EAAaL,KAAKC,MAAM,6DAEnBI,EAGF,SAASG,EAAqBC,EAAaC,EAAUC,GAEtDF,MAAgB,kBAAhBA,IAAoE,IAAjCG,EAAmBF,GACdC,mCAAAA,OAAAA,EAA1C,4BACyB,kBAAhBF,EACyDE,2DAAAA,OAAAA,EAAiBD,MAAAA,OAAAA,EAAnF,QAJa,+aAKGG,KAAKJ,GACFA,YAAAA,OAAAA,EAAwDA,8CAAAA,OAAAA,EAA3E,QAEOA,EAIX,SAASG,EAAoBF,GACvBA,MAA8B,QAA9BA,EAASrB,MAAM,KAAKyB,OAAiD,QAA9BJ,EAASrB,MAAM,KAAKyB,OAAiD,SAA9BJ,EAASrB,MAAM,KAAKyB,OAAkD,QAA9BJ,EAASrB,MAAM,KAAKyB,OAAiD,QAA9BJ,EAASrB,MAAM,KAAKyB,MAOhL,SAASC,EAAgBC,GAC1BC,OAAAA,SAASD,GAAc,GACzBE,EAAsB,aACfF,GAEA,GAIJ,SAASE,EAAuBC,GACvB,IAAIC,MAAM,UAAYD,GAC9BE,OAGD,SAASC,EAAgBnB,EAAaC,GAEvCmB,OADevB,KAAKM,UAAUH,GACnBI,QAAQ,MAAQH,EAAY,QAAU,EAKtD,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,EAAA,QAAA,iBAAA,EAAA,QAAA,oBAAA,EAAA,QAAA,eAAA,EAAA,QAAA,sBAAA,EAAA,QAAA,eAAA;;AC1DD,aAFA,IAAA,OAAA,QAAA,kBAEA,SAAWoB,GAKL,IAAA,WAAA,EALQ,OAAA,YAEVC,SAAAA,UAAAA,SACAC,SAAAA,UAAAA,SACAC,QAAAA,UAAAA,QAwBOC,SAAAA,gBACDC,IAAAA,MAAQL,EAAE,UAAUM,MACpBC,SAAWP,EAAE,aAAaM,MAC1BE,aAAeR,EAAE,aAAaM,MAC9BG,gBAAkBT,EAAE,oBAAoBM,MACxCI,QAAUV,EAAE,YAAYM,MACxBK,SAAWX,EAAE,aAAaM,MAC1BM,SAAWZ,EAAE,aAAaM,MAC1BO,cAAgBb,EAAE,kBAAkBM,MAC5B,KAAVD,OAA6B,KAAbE,UAAoC,KAAjBC,cAAmC,KAAZE,SAAoC,KAAlBG,cAC1EL,eAAiBC,iBAAmBD,aAAaM,OAAS,EAC5Dd,EAAE,wBAAwBe,KAAK,uCAG/Bf,EAAE,YAAYe,KAAK,cACnBf,EAAE,YAAYgB,KAAK,YAAY,GAE/BhB,EAAEiB,KAAK,CACLC,IAAKf,QAAU,wBACfgB,OAAQ,OACRC,YAAa,mBACbC,aAAa,EACbC,UAAW,CAAEC,iBAAiB,GAC9BC,WAAYC,SAAAA,GACVA,EAAIC,iBAAiB,gBAA0BC,SAAAA,OAAAA,KAAQ1B,GAAAA,OAAAA,SAAYC,KAAAA,OAAAA,cAErE0B,KAAMpD,KAAKM,UACT,CACEyB,SAAUA,SACVF,MAAOA,MACPH,SAAUM,aACVE,QAASA,QACTC,SAAUA,SACVC,SAAUA,SACVC,cAAeA,gBAEnBgB,QAAS,SAAUC,GACjBC,OAAOC,SAASC,KAAO,uBAAyBC,mBAAmB3B,UAAY,aAAe2B,mBAAmBvB,UAAY,UAAYuB,mBAAmB7B,OAAS,aAAe6B,mBAAmBtB,WAEzMuB,MAAO,SAAUV,MAAAA,KAETW,IAAAA,IAAMC,KAASZ,IAAAA,OAAAA,IAAIa,aAAzB,MACAtC,EAAE,wBAAwBe,KAAKqB,IAAIG,SACnCvC,EAAE,YAAYgB,KAAK,YAAY,GAC/BhB,EAAE,YAAYe,KAAK,eAKzBf,EAAE,wBAAwBe,KAAK,8BAe1ByB,SAAAA,YACDnC,IAAAA,MAAQL,EAAE,UAAUM,MACpBE,aAAeR,EAAE,aAAaM,MACtB,KAAVD,OAAiC,KAAjBG,cAElBR,EAAE,UAAUe,KAAK,cACjBf,EAAE,UAAUgB,KAAK,YAAY,GAE7BhB,EAAEiB,KAAK,CACLC,IAAKf,QAAU,qBACfgB,OAAQ,OACRC,YAAa,mBACbC,aAAa,EACbC,UAAW,CAAEC,iBAAiB,GAC9BC,WAAYC,SAAAA,GACVA,EAAIC,iBAAiB,gBAA0BC,SAAAA,OAAAA,KAAQ1B,GAAAA,OAAAA,SAAYC,KAAAA,OAAAA,cAErE0B,KAAMpD,KAAKM,UACT,CACEuB,MAAOA,MACPH,SAAUM,eAEdqB,QAAS,SAAUC,GACjBC,OAAOC,SAASC,KAAO,uBAAyBC,mBAAmBJ,EAASvB,UAAY,aAAe2B,mBAAmBJ,EAASnB,UAAY,UAAYuB,mBAAmBJ,EAASzB,OAAS,aAAe6B,mBAAmBJ,EAASlB,WAE7OuB,MAAO,SAAUV,MAAAA,KAETW,IAAAA,IAAMC,KAASZ,IAAAA,OAAAA,IAAIa,aAAzB,MACAtC,EAAE,UAAUe,KAAK,SACjBf,EAAE,wBAAwBe,KAAKqB,IAAIG,SACnCvC,EAAE,UAAUgB,KAAK,YAAY,OAIjChB,EAAE,wBAAwBe,KAAK,8BAvHnCf,EAAE,oBAAoByC,SAAS,SAAUC,GACtB1C,EAAE,oBAAoBM,MAC1BQ,OAAS,EACpBd,EAAE,wBAAwBe,KAAK,iBAE/Bf,EAAE,wBAAwBe,KAAK,MAInCf,EAAE,oBAAoByC,SAAS,SAAUE,GACjCC,IAAAA,EAAMD,EAAEE,MACVpD,GAAkB,KAAlBA,SAASmD,GAEJ,OADPxC,iBACO,IAIXJ,EAAE,YAAY8C,MAAM,SAAUJ,GAC5BtC,kBAyDFJ,EAAE,UAAU8C,MAAM,SAAUJ,GAC1BF,cAEFxC,EAAE,wBAAwByC,SAAS,SAAUE,GACrCC,IAAAA,EAAMD,EAAEE,MACVpD,GAAkB,KAAlBA,SAASmD,GAEJ,OADPJ,aACO,IAzFb,CAiIGO","file":"UserAccountcontroller.js","sourceRoot":"../src","sourcesContent":["export function parseJwt () {\n  const base64Url = document.querySelector('meta[name=\"apiToken\"]').getAttribute('content').split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n}\n\nexport function checkUsersOnline (sessionData, userEmail) {\n  var userStatus = JSON.parse('{ \"userStatus\":\"Offline\",\"colorIndicator\":\"text-warning\"}');\n  const textObject = JSON.stringify(sessionData);\n  if (textObject.indexOf('\\\\\"' + userEmail + '\\\\\"') >= 0) {\n    userStatus = JSON.parse('{ \"userStatus\":\"Online\",\"colorIndicator\":\"text-success\"}');\n  }\n  return userStatus;\n}\n\nexport function checkFileAttachment (messageBody, fileName, autoFileName) {\n  const regexp = /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/;\n  if (messageBody === 'IMAGE-CHAT-01' && checkFileExtension(fileName) === true) {\n    return `<img src=\"data:image/png;base64,${autoFileName}\" class='chat-image' />`;\n  } else if (messageBody === 'IMAGE-CHAT-01') {\n    return `<a href=\"#\" class=\"file-down chat-link-style\" fileName=\"${autoFileName}\">${fileName}</a>`;\n  } else if (regexp.test(messageBody)) {\n    return `<a href=\"${messageBody}\" target=\"_blank\" class=\"chat-link-style\">${messageBody}</a>`;\n  } else {\n    return messageBody;\n  }\n}\n\nfunction checkFileExtension (fileName) {\n  if (fileName.split('.').pop() === 'jpg' || fileName.split('.').pop() === 'svg' || fileName.split('.').pop() === 'jpeg' || fileName.split('.').pop() === 'png' || fileName.split('.').pop() === 'gif') {\n    return true;\n  } else {\n    return false;\n  }\n}\n// start play sound\nexport function startPlaySound (smsNumbers) {\n  if (parseInt(smsNumbers) > 0) {\n    playNotificationSound('alert.mp3');\n    return smsNumbers;\n  } else {\n    return '';\n  }\n}\n\nexport function playNotificationSound (audioFile) {\n  const audio = new Audio('images/' + audioFile);\n  audio.play();\n}\n\nexport function videoCheckUser (sessionData, userEmail) {\n  const textObject = JSON.stringify(sessionData);\n  if (textObject.indexOf('\\\\\"' + userEmail + '\\\\\"') >= 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n","import { parseJwt } from './utils/index';\n\n(function ($) {\n  const {\n    username,\n    password,\n    urlBase\n  } = parseJwt();\n\n  $('#confirmPassword').keypress(function (event) {\n    const password = $('#confirmPassword').val();\n    if (password.length < 5) {\n      $('#validateUserAccount').html('Weak password');\n    } else {\n      $('#validateUserAccount').html('');\n    }\n  });\n  // register users\n  $('#confirmPassword').keypress(function (e) {\n    const key = e.which;\n    if (parseInt(key) === 13) {\n      registerUsers();\n      return false;\n    }\n  });\n\n  $('#sign_up').click(function (event) {\n    registerUsers();\n  });\n\n  function registerUsers () {\n    const email = $('#email').val();\n    const fullName = $('#fullName').val();\n    const userPassword = $('#password').val();\n    const confirmPassword = $('#confirmPassword').val();\n    const contact = $('#contact').val();\n    const userType = $('#userType').val();\n    const facility = $('#facility').val();\n    const recommendedBy = $('#recommendedBy').val();\n    if (email !== '' && fullName !== '' && userPassword !== '' && contact !== '' && recommendedBy !== '') {\n      if (userPassword !== confirmPassword || userPassword.length < 5) {\n        $('#validateUserAccount').html('Password is not matching or weak!!');\n      } else {\n      // GETTING STARTED\n        $('#sign_up').html('Submitting');\n        $('#sign_up').prop('disabled', true);\n        // AJAX\n        $.ajax({\n          url: urlBase + '/register-userAccount',\n          method: 'POST',\n          contentType: 'application/json',\n          crossDomain: true,\n          xhrFields: { withCredentials: true },\n          beforeSend (xhr) {\n            xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n          },\n          data: JSON.stringify(\n            {\n              fullName: fullName,\n              email: email,\n              password: userPassword,\n              contact: contact,\n              userType: userType,\n              facility: facility,\n              recommendedBy: recommendedBy\n            }),\n          success: function (response) {\n            window.location.href = '/autologin?fullName=' + encodeURIComponent(fullName) + '&userType=' + encodeURIComponent(userType) + '&email=' + encodeURIComponent(email) + '&facility=' + encodeURIComponent(facility) + '';\n          },\n          error: function (xhr) {\n            // eslint-disable-next-line no-eval\n            const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n            $('#validateUserAccount').html(err.message);\n            $('#sign_up').prop('disabled', false);\n            $('#sign_up').html('Sign up');\n          }\n        });\n      }\n    } else {\n      $('#validateUserAccount').html('All fields are required !!');\n    }\n  }\n\n  // login submit\n  $('#login').click(function (event) {\n    loginUser();\n  });\n  $('#login_user_password').keypress(function (e) {\n    const key = e.which;\n    if (parseInt(key) === 13) {\n      loginUser();\n      return false;\n    }\n  });\n  function loginUser () {\n    const email = $('#email').val();\n    const userPassword = $('#password').val();\n    if (email !== '' && userPassword !== '') {\n    // GETTING STARTED\n      $('#login').html('Processing');\n      $('#login').prop('disabled', true);\n      // AJAX\n      $.ajax({\n        url: urlBase + '/login-userAccount',\n        method: 'POST',\n        contentType: 'application/json',\n        crossDomain: true,\n        xhrFields: { withCredentials: true },\n        beforeSend (xhr) {\n          xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n        },\n        data: JSON.stringify(\n          {\n            email: email,\n            password: userPassword\n          }),\n        success: function (response) {\n          window.location.href = '/autologin?fullName=' + encodeURIComponent(response.fullName) + '&userType=' + encodeURIComponent(response.userType) + '&email=' + encodeURIComponent(response.email) + '&facility=' + encodeURIComponent(response.facility) + '';\n        },\n        error: function (xhr) {\n          // eslint-disable-next-line no-eval\n          const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n          $('#login').html('Login');\n          $('#validateUserAccount').html(err.message);\n          $('#login').prop('disabled', false);\n        }\n      });\n    } else {\n      $('#validateUserAccount').html('All fields are required !!');\n    }\n  }\n})(jQuery);\n"]}