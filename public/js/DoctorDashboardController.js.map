{"version":3,"sources":["utils/index.js","DoctorDashboardController.js"],"names":["parseJwt","base64Url","base64","document","querySelector","getAttribute","split","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","checkUsersOnline","sessionData","userEmail","userStatus","stringify","indexOf","checkFileAttachment","messageBody","fileName","autoFileName","checkFileExtension","test","pop","startPlaySound","smsNumbers","parseInt","playNotificationSound","audioFile","Audio","play","videoCheckUser","textObject","$","username","password","urlBase","pageBase","loggedUser","loggedInUrl","chatLock","notificationMessages","ajax","url","method","contentType","crossDomain","xhrFields","withCredentials","beforeSend","xhr","setRequestHeader","btoa","data","userType","receiver","val","success","response","empty","chatActive","i","length","email","colorIndicator","append","fullName","alertMessages","facility","html","attr","loadingActiveChat","setInterval","doAjaxCall","sessionCheckIntervalInSec","error","err","eval","responseText","alert","message","sender","chatHandler","searchByFacility","searchFacility","sendChatMessage","originalFile","messageTime","moment","chatTime","format","status","scrollTop","scrollHeight","autoChatRefresh","receiverChat","autoActiveChat","console","log","chatStatus","registerEmail","unreadMessages","on","parent","find","removeClass","css","click","event","keypress","keycode","keyCode","which","next","trigger","change","$chatFile","fileSelected","prop","$uploadMessage","show","formData","FormData","processData","setTimeout","hide","window","location","href","preventDefault","left","width","top","height","open","jQuery"],"mappings":"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","file":"DoctorDashboardController.js","sourceRoot":"../src","sourcesContent":["export function parseJwt () {\n  const base64Url = document.querySelector('meta[name=\"apiToken\"]').getAttribute('content').split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n}\n\nexport function checkUsersOnline (sessionData, userEmail) {\n  var userStatus = JSON.parse('{ \"userStatus\":\"Offline\",\"colorIndicator\":\"text-warning\"}');\n  const textObject = JSON.stringify(sessionData);\n  if (textObject.indexOf('\\\\\"' + userEmail + '\\\\\"') >= 0) {\n    userStatus = JSON.parse('{ \"userStatus\":\"Online\",\"colorIndicator\":\"text-success\"}');\n  }\n  return userStatus;\n}\n\nexport function checkFileAttachment (messageBody, fileName, autoFileName) {\n  const regexp = /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/;\n  if (messageBody === 'IMAGE-CHAT-01' && checkFileExtension(fileName) === true) {\n    return `<img src=\"data:image/png;base64,${autoFileName}\" class='chat-image' />`;\n  } else if (messageBody === 'IMAGE-CHAT-01') {\n    return `<a href=\"#\" class=\"file-down chat-link-style\" fileName=\"${autoFileName}\">${fileName}</a>`;\n  } else if (regexp.test(messageBody)) {\n    return `<a href=\"${messageBody}\" target=\"_blank\" class=\"chat-link-style\">${messageBody}</a>`;\n  } else {\n    return messageBody;\n  }\n}\n\nfunction checkFileExtension (fileName) {\n  if (fileName.split('.').pop() === 'jpg' || fileName.split('.').pop() === 'svg' || fileName.split('.').pop() === 'jpeg' || fileName.split('.').pop() === 'png' || fileName.split('.').pop() === 'gif') {\n    return true;\n  } else {\n    return false;\n  }\n}\n// start play sound\nexport function startPlaySound (smsNumbers) {\n  if (parseInt(smsNumbers) > 0) {\n    playNotificationSound('alert.mp3');\n    return smsNumbers;\n  } else {\n    return '';\n  }\n}\n\nexport function playNotificationSound (audioFile) {\n  const audio = new Audio('images/' + audioFile);\n  audio.play();\n}\n\nexport function videoCheckUser (sessionData, userEmail) {\n  const textObject = JSON.stringify(sessionData);\n  if (textObject.indexOf('\\\\\"' + userEmail + '\\\\\"') >= 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n","import { parseJwt, checkUsersOnline, checkFileAttachment, startPlaySound } from './utils/index';\n\n(function ($) {\n  const {\n    username,\n    password,\n    urlBase,\n    pageBase,\n    loggedUser,\n    loggedInUrl\n  } = parseJwt();\n  // chat global variables\n  var chatLock = 0;\n\n  // auto load contents\n  switch (pageBase) {\n    case 'Doctor':\n      notificationMessages();\n      chatLock = 1;\n      // GETTING STARTED\n      $.ajax({\n        url: urlBase + '/find-by-usertype',\n        method: 'GET',\n        contentType: 'application/json',\n        crossDomain: true,\n        xhrFields: { withCredentials: true },\n        beforeSend (xhr) {\n          xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n        },\n        data: { userType: 'Pregnant Woman', receiver: $('#registerEmail').val() },\n        success: function (response) {\n          $('.inbox_chat').empty();\n          var chatActive = '';\n          for (let i = 0; i < response.length; i++) {\n            const { userStatus, colorIndicator } = checkUsersOnline(loggedUser, response[i].email);\n            if (chatActive === '') {\n              $('.inbox_chat').append(`\n                <a href=\"#\"  receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n                  <div class=\"chat_list active_chat\">\n                  <div class=\"chat_people\">\n                    <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                    <div class=\"chat_ib\">\n                    <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus}<span class=\"text-success px-2\">${startPlaySound(response[i].alertMessages)}</span></span></h5>\n                    <p>${response[i].facility}</p>\n                    </div>\n                  </div>\n                  </div>\n                </a>\n                `);\n              $('.top-chat-header').html(response[i].fullName);\n              $('.msg_video_call').attr('href', `/startVideoCall?fullName=${response[i].fullName}&email=${response[i].email}`);\n              chatActive = response[i].email;\n            } else {\n              $('.inbox_chat').append(`\n              <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n                <div class=\"chat_list\">\n                <div class=\"chat_people\">\n                  <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                  <div class=\"chat_ib\">\n                  <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus}<span class=\"text-success px-2\">${startPlaySound(response[i].alertMessages)}</span></span></h5>\n                  <p>${response[i].facility}</p>\n                  </div>\n                </div>\n                </div>\n              </a>\n              `);\n            }\n          }\n          // laod active chat\n          loadingActiveChat(chatActive);\n          chatLock = 0;\n          // auto monitoring\n          const sessionCheckIntervalInSec = 10;\n          setInterval(doAjaxCall, sessionCheckIntervalInSec * 1000);\n        },\n        error: function (xhr) {\n          // eslint-disable-next-line no-eval\n          const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n          alert(err.message);\n        }\n      });\n      break;\n  }\n\n  // select chatroom\n  $('.inbox_chat').on('click', '.startUserChat', function () {\n    const receiver = $(this).attr('receiverEmail');\n    $('.top-chat-header').html($(this).attr('receiverFullName'));\n    $('.msg_video_call').attr('href', `/startVideoCall?fullName=${$(this).attr('receiverFullName')}&email=${$(this).attr('receiverEmail')}`);\n    $(this).parent().find('div.active_chat').removeClass('active_chat');\n    $(this).css('background: #e8f6ff;');\n    chatLock = 1;\n    loadingActiveChat(receiver);\n    chatLock = 0;\n  });\n\n  function loadingActiveChat (receiver) {\n    const sender = $('#registerEmail').val();\n    chatLock = 1;\n    $('#chatReceiver').val(receiver);\n    $('.msg_history').html('<div class=\"d-flex justify-content-center\"><div class=\"spinner-border text-primary m-5\" role=\"status\"><span class=\"sr-only\">Loading...</span> </div></div>');\n\n    $.ajax({\n      url: urlBase + '/find-senderandreceiver',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { sender: sender, receiver: receiver },\n      success: function (response) {\n        chatHandler(response, sender);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n  // send chat message\n  $('#sendChatMessage').click(function (event) {\n    chatLock = 1;\n    const receiver = $('#chatReceiver').val();\n    const messageBody = $('#messageBody').val();\n    if (messageBody !== '') {\n      sendChatMessage(messageBody, receiver);\n      $('#messageBody').val('');\n    }\n    chatLock = 0;\n  });\n\n  $('#searchFacility').keypress(function (event) {\n    chatLock = 1;\n    const keycode = (event.keyCode ? event.keyCode : event.which);\n    if (parseInt(keycode) === 13) {\n      const searchFacility = $('#searchFacility').val();\n      if (searchFacility !== '') {\n        searchByFacility(searchFacility, 'Pregnant Woman');\n        $('#searchFacility').val('');\n      }\n    }\n    chatLock = 0;\n  });\n\n  function searchByFacility (searchFacility, userType) {\n    $.ajax({\n      url: urlBase + '/find-by-facility',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { facility: searchFacility, userType: userType },\n      success: function (response) {\n        $('.inbox_chat').empty();\n        var chatActive = '';\n        for (let i = 0; i < response.length; i++) {\n          const { userStatus, colorIndicator } = checkUsersOnline(loggedUser, response[i].email);\n          if (chatActive === '') {\n            $('.inbox_chat').append(`\n              <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n                <div class=\"chat_list active_chat\">\n                <div class=\"chat_people\">\n                  <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                  <div class=\"chat_ib\">\n                  <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus}</span></h5>\n                  <p>${response[i].facility}</p>\n                  </div>\n                </div>\n                </div>\n              </a>\n              `);\n            $('.top-chat-header').html(response[i].fullName);\n            $('.msg_video_call').attr('href', `/startVideoCall?fullName=${response[i].fullName}&email=${response[i].email}`);\n            chatActive = response[i].email;\n          } else {\n            $('.inbox_chat').append(`\n            <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n              <div class=\"chat_list\">\n              <div class=\"chat_people\">\n                <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                <div class=\"chat_ib\">\n                <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus}</span></h5>\n                <p>${response[i].facility}</p>\n                </div>\n              </div>\n              </div>\n            </a>\n            `);\n          }\n        }\n        // laod active chat\n        loadingActiveChat(chatActive);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n\n  $('#messageBody').keypress(function (event) {\n    chatLock = 1;\n    const keycode = (event.keyCode ? event.keyCode : event.which);\n    if (parseInt(keycode) === 13) {\n      const receiver = $('#chatReceiver').val();\n      const messageBody = $('#messageBody').val();\n      if (messageBody !== '') {\n        sendChatMessage(messageBody, receiver);\n        $('#messageBody').val('');\n      }\n    }\n    chatLock = 0;\n  });\n\n  function sendChatMessage (messageBody, receiver) {\n    const sender = $('#registerEmail').val();\n    $.ajax({\n      url: urlBase + '/save-user-chat',\n      method: 'POST',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: JSON.stringify(\n        {\n          sender: sender,\n          receiver: receiver,\n          messageBody: messageBody\n        }),\n      success: function (response) {\n        chatHandler(response, sender);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n\n  function chatHandler (response, sender) {\n    $('.msg_history').empty();\n    for (let i = 0; i < response.length; i++) {\n      if (response[i].sender === sender) {\n        $('.msg_history').append(`\n              <div class=\"outgoing_msg\">\n              <div class=\"sent_msg\">\n                <p>${checkFileAttachment(response[i].messageBody, response[i].originalFile, response[i].fileName)}</p>\n                <span class=\"time_date\">${response[i].messageTime}    |    ${moment(response[i].chatTime).format('YYYY-MM-DD')}    |    <span class =\"text-success\">${response[i].status}</span></span> </div>\n              </div>\n            `);\n      } else {\n        $('.msg_history').append(`\n          <div class=\"incoming_msg\">\n            <div class=\"incoming_msg_img\"> <img src=\"images/black_doctor.jpg\" alt=\"sunil\"> </div>\n            <div class=\"received_msg\">\n              <div class=\"received_withd_msg\">\n              <p>${checkFileAttachment(response[i].messageBody, response[i].originalFile, response[i].fileName)}</p>\n              <span class=\"time_date\">${response[i].messageTime}    |    ${response[i].chatTime}    |    <span class =\"text-success\">${response[i].status}</span></span></div>\n            </div>\n            </div>\n          `);\n      }\n    }\n    // scroll bottom\n    $('.msg_history').scrollTop($('.msg_history')[0].scrollHeight);\n  }\n  // start realTime Monitoring\n  function doAjaxCall () {\n    if (parseInt(chatLock) === 0) {\n      autoChatRefresh($('#chatReceiver').val());\n    }\n  }\n\n  function autoChatRefresh (receiverChat) {\n    $.ajax({\n      url: urlBase + '/find-by-usertype',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { userType: 'Pregnant Woman', receiver: $('#registerEmail').val() },\n      success: function (response) {\n        $('.inbox_chat').empty();\n        for (let i = 0; i < response.length; i++) {\n          const { userStatus, colorIndicator } = checkUsersOnline(loggedUser, response[i].email);\n          $('.inbox_chat').append(`\n            <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n              <div class=\"chat_list\">\n              <div class=\"chat_people\">\n                <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                <div class=\"chat_ib\">\n                <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus}<span class=\"text-success\">${startPlaySound(response[i].alertMessages)}</span></span></h5>\n                <p>${response[i].facility}</p>\n                </div>\n              </div>\n              </div>\n            </a>\n            `);\n        }\n        // laod active chat\n        autoActiveChat(receiverChat);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        console.log(err.message);\n      }\n    });\n  }\n  // auto chat refresh\n  function autoActiveChat (receiver) {\n    const sender = $('#registerEmail').val();\n    $.ajax({\n      url: urlBase + '/find-senderandreceiver',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { sender: sender, receiver: receiver },\n      success: function (response) {\n        chatHandler(response, sender);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n  // notificationMessages\n  function notificationMessages () {\n    const sender = $('#registerEmail').val();\n    $.ajax({\n      url: urlBase + '/find-receiver',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { receiver: sender, chatStatus: 'sent' },\n      success: function (response) {\n        $('#messageCenter').empty();\n        for (let i = 0; i < response.length; i++) {\n          $('#messageCenter').append(`<a class=\"dropdown-item d-flex align-items-center\" href=\"/patient-chat-selection\">\n              <div class=\"dropdown-list-image mr-3\">\n                <img class=\"rounded-circle\" src=\"images/patient_logo.png\" alt=\"\">\n                <div class=\"status-indicator bg-success\"></div>\n              </div>\n              <div class=\"font-weight-bold\">\n                <div class=\"text-truncate\">${response[i].messageBody}</div>\n                <div class=\"small text-gray-500\">${response[i].sender}</div>\n              </div>\n          </a>`);\n        }\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n\n    $.ajax({\n      url: urlBase + '/top-dashboard-data',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { registerEmail: sender },\n      success: function (response) {\n        $('.countNot').html(response[0].unreadMessages);\n        $('.unread-messages').html(response[0].unreadMessages);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n  $('#uploadIcon').click(function () {\n    $(this).next().trigger('click');\n  });\n\n  $('#chatFile').change(function () {\n    const $chatFile = $('#chatFile');\n    const fileSelected = $chatFile.prop('files')[0];\n    const $uploadMessage = $('.upload_message');\n    const sender = $('#registerEmail').val();\n    const receiver = $('#chatReceiver').val();\n\n    if ($chatFile.val() === '') {\n      return;\n    }\n\n    $uploadMessage.html('Uploading');\n    $uploadMessage.show();\n    const formData = new FormData();\n    formData.append('attachFile', fileSelected);\n    formData.append('sender', sender);\n    formData.append('receiver', receiver);\n    $.ajax({\n      url: urlBase + '/attach-user-chat',\n      method: 'POST',\n      data: formData,\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      processData: false,\n      contentType: false,\n      success: function (response) {\n        $uploadMessage.html('Success');\n        $chatFile.val(null);\n        setTimeout(\n          function () {\n            $uploadMessage.hide();\n          }, 5000);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        $uploadMessage.html(err.message);\n      }\n    });\n  });\n  // file download\n  $('.msg_history').on('click', '.file-down', function () {\n    const fileName = $(this).attr('fileName');\n    window.location.href = loggedInUrl + `/download?fileName=${fileName}`;\n  });\n\n  $('#startViewVideo').click(function (event) {\n    event.preventDefault();\n    const left = ($(window).width() / 2) - (900 / 2);\n    const top = ($(window).height() / 2) - (600 / 2);\n    window.open($(this).attr('href'), 'popupWindow', 'width=1000,height=700,top=' + top + ', left=' + left + ',scrollbars=yes');\n  });\n})(jQuery);\n"]}