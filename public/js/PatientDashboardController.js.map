{"version":3,"sources":["utils/index.js","PatientDashboardController.js"],"names":["parseJwt","base64Url","base64","document","querySelector","getAttribute","split","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","checkUsersOnline","sessionData","userEmail","userStatus","stringify","indexOf","checkFileAttachment","messageBody","fileName","autoFileName","checkFileExtension","test","pop","startPlaySound","smsNumbers","parseInt","playNotificationSound","audioFile","Audio","play","videoCheckUser","textObject","$","username","password","urlBase","pageBase","loggedUser","loggedInUrl","chatLock","click","html","serialNumber","val","deviceModel","owner","location","facility","registerEmail","$errorMessage","ajax","url","method","contentType","crossDomain","xhrFields","withCredentials","beforeSend","xhr","setRequestHeader","btoa","data","success","response","window","open","error","err","eval","responseText","message","$divItemsLoader","notificationMessages","empty","i","length","append","id","userType","receiver","chatActive","email","colorIndicator","fullName","alertMessages","attr","loadingActiveChat","setInterval","doAjaxCall","sessionCheckIntervalInSec","alert","sender","chatHandler","searchByFacility","searchFacility","sendChatMessage","originalFile","messageTime","moment","chatTime","format","status","scrollTop","scrollHeight","autoChatRefresh","receiverChat","autoActiveChat","console","log","chatStatus","unreadMessages","wekebereBelts","contraction","fhr","on","deleteId","parent","find","removeClass","css","event","keypress","keycode","keyCode","which","next","trigger","change","$chatFile","fileSelected","prop","$uploadMessage","show","formData","FormData","processData","setTimeout","hide","href","preventDefault","left","width","top","height","jQuery"],"mappings":"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","file":"PatientDashboardController.js","sourceRoot":"../src","sourcesContent":["export function parseJwt () {\n  const base64Url = document.querySelector('meta[name=\"apiToken\"]').getAttribute('content').split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n}\n\nexport function checkUsersOnline (sessionData, userEmail) {\n  var userStatus = JSON.parse('{ \"userStatus\":\"Offline\",\"colorIndicator\":\"text-warning\"}');\n  const textObject = JSON.stringify(sessionData);\n  if (textObject.indexOf('\\\\\"' + userEmail + '\\\\\"') >= 0) {\n    userStatus = JSON.parse('{ \"userStatus\":\"Online\",\"colorIndicator\":\"text-success\"}');\n  }\n  return userStatus;\n}\n\nexport function checkFileAttachment (messageBody, fileName, autoFileName) {\n  const regexp = /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/;\n  if (messageBody === 'IMAGE-CHAT-01' && checkFileExtension(fileName) === true) {\n    return `<img src=\"data:image/png;base64,${autoFileName}\" class='chat-image' />`;\n  } else if (messageBody === 'IMAGE-CHAT-01') {\n    return `<a href=\"#\" class=\"file-down chat-link-style\" fileName=\"${autoFileName}\">${fileName}</a>`;\n  } else if (regexp.test(messageBody)) {\n    return `<a href=\"${messageBody}\" target=\"_blank\" class=\"chat-link-style\">${messageBody}</a>`;\n  } else {\n    return messageBody;\n  }\n}\n\nfunction checkFileExtension (fileName) {\n  if (fileName.split('.').pop() === 'jpg' || fileName.split('.').pop() === 'svg' || fileName.split('.').pop() === 'jpeg' || fileName.split('.').pop() === 'png' || fileName.split('.').pop() === 'gif') {\n    return true;\n  } else {\n    return false;\n  }\n}\n// start play sound\nexport function startPlaySound (smsNumbers) {\n  if (parseInt(smsNumbers) > 0) {\n    playNotificationSound('alert.mp3');\n    return smsNumbers;\n  } else {\n    return '';\n  }\n}\n\nexport function playNotificationSound (audioFile) {\n  const audio = new Audio('images/' + audioFile);\n  audio.play();\n}\n\nexport function videoCheckUser (sessionData, userEmail) {\n  const textObject = JSON.stringify(sessionData);\n  if (textObject.indexOf('\\\\\"' + userEmail + '\\\\\"') >= 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n","import { parseJwt, checkUsersOnline, checkFileAttachment, startPlaySound } from './utils/index';\n\n(function ($) {\n  const {\n    username,\n    password,\n    urlBase,\n    pageBase,\n    loggedUser,\n    loggedInUrl\n  } = parseJwt();\n  // chat global variables\n  var chatLock = 0;\n\n  // save wekebere belt\n  $('#saveWekebereBelt').click(() => {\n    $(this).html('Saving');\n    const serialNumber = $('#serialNumber').val();\n    const deviceModel = $('#deviceModel').val();\n    const owner = $('#owner').val();\n    const location = $('#location').val();\n    const facility = $('#facility').val();\n    const registerEmail = $('#registerEmail').val();\n    const $errorMessage = $('.error-message');\n    if (serialNumber === '' || deviceModel === '' || owner === '' || location === '') {\n      $errorMessage.html('All fields are required !!');\n      $(this).html('Save');\n    } else {\n    // GETTING STARTED\n      $.ajax({\n        url: urlBase + '/register-wekebere-belt',\n        method: 'POST',\n        contentType: 'application/json',\n        crossDomain: true,\n        xhrFields: { withCredentials: true },\n        beforeSend (xhr) {\n          xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n        },\n        data: JSON.stringify(\n          {\n            serialNumber: serialNumber,\n            deviceModel: deviceModel,\n            owner: owner,\n            location: location,\n            facility: facility,\n            registerEmail: registerEmail\n          }),\n        success: function (response) {\n          window.open('/wekebere-belts', '_self');\n        },\n        error: function (xhr) {\n          // eslint-disable-next-line no-eval\n          const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n          $errorMessage.html(err.message);\n          $(this).html('Save');\n        }\n      });\n    }\n  });\n\n  const $divItemsLoader = $('.div-items-loader');\n  const registerEmail = $('#registerEmail').val();\n  // auto load contents\n  switch (pageBase) {\n    case 'Pregnant Woman':\n      notificationMessages();\n      break;\n    case 'WekebereBelt':\n      // GETTING STARTED\n      $.ajax({\n        url: urlBase + '/list-wekebere-belts',\n        method: 'GET',\n        contentType: 'application/json',\n        crossDomain: true,\n        xhrFields: { withCredentials: true },\n        beforeSend (xhr) {\n          xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n        },\n        data: { registerEmail: registerEmail },\n        success: function (response) {\n          $divItemsLoader.empty();\n          for (let i = 0; i < response.length; i++) {\n            $divItemsLoader.append(`<p class=\"text-gray-500 font-weight-bold border-bottom border-primary\">${response[i].serialNumber} <span class=\"float-right\"><a href=\"#\" class=\"wekebere-belt-delete\" deleteId=\"${response[i].id}\"><i class=\"fas fa-trash-alt\"></i></a></span></p>`);\n          }\n        },\n        error: function (xhr) {\n          // eslint-disable-next-line no-eval\n          const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n          $divItemsLoader.append(`<p class=\"text-gray-500 text-denger text-center\">${err.message}</p>`);\n          $(this).html('Save');\n        }\n      });\n      break;\n    case 'PatientChatSelection':\n      chatLock = 1;\n      // GETTING STARTED\n      $.ajax({\n        url: urlBase + '/find-by-usertype',\n        method: 'GET',\n        contentType: 'application/json',\n        crossDomain: true,\n        xhrFields: { withCredentials: true },\n        beforeSend (xhr) {\n          xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n        },\n        data: { userType: 'Doctor', receiver: $('#registerEmail').val() },\n        success: function (response) {\n          $('.inbox_chat').empty();\n          var chatActive = '';\n          for (let i = 0; i < response.length; i++) {\n            const { userStatus, colorIndicator } = checkUsersOnline(loggedUser, response[i].email);\n            if (chatActive === '') {\n              $('.inbox_chat').append(`\n                <a href=\"#\"  receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n                  <div class=\"chat_list active_chat\">\n                  <div class=\"chat_people\">\n                    <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                    <div class=\"chat_ib\">\n                    <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus} <span class=\"text-success px-2\">${startPlaySound(response[i].alertMessages)}</span></span></h5>\n                    <p>${response[i].facility}</p>\n                    </div>\n                  </div>\n                  </div>\n                </a>\n                `);\n              $('.top-chat-header').html(response[i].fullName);\n              $('.msg_video_call').attr('href', `/startVideoCall?fullName=${response[i].fullName}&email=${response[i].email}`);\n              chatActive = response[i].email;\n            } else {\n              $('.inbox_chat').append(`\n              <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n                <div class=\"chat_list\">\n                <div class=\"chat_people\">\n                  <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                  <div class=\"chat_ib\">\n                  <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus} <span class=\"text-success px-2\">${startPlaySound(response[i].alertMessages)}</span></span></h5>\n                  <p>${response[i].facility}</p>\n                  </div>\n                </div>\n                </div>\n              </a>\n              `);\n            }\n          }\n          // laod active chat\n          loadingActiveChat(chatActive);\n          chatLock = 0;\n          // auto monitoring\n          const sessionCheckIntervalInSec = 10;\n          setInterval(doAjaxCall, sessionCheckIntervalInSec * 1000);\n        },\n        error: function (xhr) {\n          // eslint-disable-next-line no-eval\n          const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n          alert(err.message);\n        }\n      });\n      break;\n  }\n\n  // load wekebere belts\n  $divItemsLoader.on('click', '.wekebere-belt-delete', function () {\n    const deleteId = $(this).attr('deleteId');\n    const registerEmail = $('#registerEmail').val();\n    $.ajax({\n      url: urlBase + '/delete-wekebere-belt',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { id: deleteId, registerEmail: registerEmail },\n      success: function (response) {\n        $divItemsLoader.empty();\n        for (let i = 0; i < response.length; i++) {\n          $divItemsLoader.append(`<p class=\"text-gray-500 font-weight-bold border-bottom border-primary\">${response[i].serialNumber} <span class=\"float-right\"><a href=\"#\" class=\"wekebere-belt-delete\" deleteId=\"${response[i].id}\"><i class=\"fas fa-trash-alt\"></i></a></span></p>`);\n        }\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        $divItemsLoader.append(`<p class=\"text-gray-500 text-denger text-center\">${err.message}</p>`);\n      }\n    });\n  });\n\n  // select chatroom\n  $('.inbox_chat').on('click', '.startUserChat', function () {\n    const receiver = $(this).attr('receiverEmail');\n    $('.top-chat-header').html($(this).attr('receiverFullName'));\n    $('.msg_video_call').attr('href', `/startVideoCall?fullName=${$(this).attr('receiverFullName')}&email=${$(this).attr('receiverEmail')}`);\n    $(this).parent().find('div.active_chat').removeClass('active_chat');\n    $(this).css('background: #e8f6ff;');\n    chatLock = 1;\n    loadingActiveChat(receiver);\n    chatLock = 0;\n  });\n\n  function loadingActiveChat (receiver) {\n    const sender = $('#registerEmail').val();\n    chatLock = 1;\n    $('#chatReceiver').val(receiver);\n    $('.msg_history').html('<div class=\"d-flex justify-content-center\"><div class=\"spinner-border text-primary m-5\" role=\"status\"><span class=\"sr-only\">Loading...</span> </div></div>');\n\n    $.ajax({\n      url: urlBase + '/find-senderandreceiver',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { sender: sender, receiver: receiver },\n      success: function (response) {\n        chatHandler(response, sender);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n  // send chat message\n  $('#sendChatMessage').click(function (event) {\n    chatLock = 1;\n    const receiver = $('#chatReceiver').val();\n    const messageBody = $('#messageBody').val();\n    if (messageBody !== '') {\n      sendChatMessage(messageBody, receiver);\n      $('#messageBody').val('');\n    }\n    chatLock = 0;\n  });\n\n  $('#searchFacility').keypress(function (event) {\n    chatLock = 1;\n    const keycode = (event.keyCode ? event.keyCode : event.which);\n    if (parseInt(keycode) === 13) {\n      const searchFacility = $('#searchFacility').val();\n      if (searchFacility !== '') {\n        searchByFacility(searchFacility, 'Doctor');\n        $('#searchFacility').val('');\n      }\n    }\n    chatLock = 0;\n  });\n\n  function searchByFacility (searchFacility, userType) {\n    $.ajax({\n      url: urlBase + '/find-by-facility',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { facility: searchFacility, userType: userType },\n      success: function (response) {\n        $('.inbox_chat').empty();\n        var chatActive = '';\n        for (let i = 0; i < response.length; i++) {\n          const { userStatus, colorIndicator } = checkUsersOnline(loggedUser, response[i].email);\n          if (chatActive === '') {\n            $('.inbox_chat').append(`\n              <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n                <div class=\"chat_list active_chat\">\n                <div class=\"chat_people\">\n                  <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                  <div class=\"chat_ib\">\n                  <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus}</span></h5>\n                  <p>${response[i].facility}</p>\n                  </div>\n                </div>\n                </div>\n              </a>\n              `);\n            $('.top-chat-header').html(response[i].fullName);\n            $('.msg_video_call').attr('href', `/startVideoCall?fullName=${response[i].fullName}&email=${response[i].email}`);\n            chatActive = response[i].email;\n          } else {\n            $('.inbox_chat').append(`\n            <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n              <div class=\"chat_list\">\n              <div class=\"chat_people\">\n                <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                <div class=\"chat_ib\">\n                <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus}</span></h5>\n                <p>${response[i].facility}</p>\n                </div>\n              </div>\n              </div>\n            </a>\n            `);\n          }\n        }\n        // laod active chat\n        loadingActiveChat(chatActive);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n\n  $('#messageBody').keypress(function (event) {\n    chatLock = 1;\n    const keycode = (event.keyCode ? event.keyCode : event.which);\n    if (parseInt(keycode) === 13) {\n      const receiver = $('#chatReceiver').val();\n      const messageBody = $('#messageBody').val();\n      if (messageBody !== '') {\n        sendChatMessage(messageBody, receiver);\n        $('#messageBody').val('');\n      }\n    }\n    chatLock = 0;\n  });\n\n  function sendChatMessage (messageBody, receiver) {\n    const sender = $('#registerEmail').val();\n    $.ajax({\n      url: urlBase + '/save-user-chat',\n      method: 'POST',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: JSON.stringify(\n        {\n          sender: sender,\n          receiver: receiver,\n          messageBody: messageBody\n        }),\n      success: function (response) {\n        chatHandler(response, sender);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n\n  function chatHandler (response, sender) {\n    $('.msg_history').empty();\n    for (let i = 0; i < response.length; i++) {\n      if (response[i].sender === sender) {\n        $('.msg_history').append(`\n              <div class=\"outgoing_msg\">\n              <div class=\"sent_msg\">\n                <p>${checkFileAttachment(response[i].messageBody, response[i].originalFile, response[i].fileName)}</p>\n                <span class=\"time_date\">${response[i].messageTime}    |    ${moment(response[i].chatTime).format('YYYY-MM-DD')}    |    <span class =\"text-success\">${response[i].status}</span></span> </div>\n              </div>\n            `);\n      } else {\n        $('.msg_history').append(`\n          <div class=\"incoming_msg\">\n            <div class=\"incoming_msg_img\"> <img src=\"images/black_doctor.jpg\" alt=\"sunil\"> </div>\n            <div class=\"received_msg\">\n              <div class=\"received_withd_msg\">\n              <p>${checkFileAttachment(response[i].messageBody, response[i].originalFile, response[i].fileName)}</p>\n              <span class=\"time_date\">${response[i].messageTime}    |    ${response[i].chatTime}    |    <span class =\"text-success\">${response[i].status}</span></span></div>\n            </div>\n            </div>\n          `);\n      }\n    }\n    // scroll bottom\n    $('.msg_history').scrollTop($('.msg_history')[0].scrollHeight);\n  }\n  // start realTime Monitoring\n  function doAjaxCall () {\n    if (parseInt(chatLock) === 0) {\n      autoChatRefresh($('#chatReceiver').val());\n    }\n  }\n\n  function autoChatRefresh (receiverChat) {\n    $.ajax({\n      url: urlBase + '/find-by-usertype',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { userType: 'Doctor', receiver: $('#registerEmail').val() },\n      success: function (response) {\n        $('.inbox_chat').empty();\n        for (let i = 0; i < response.length; i++) {\n          const { userStatus, colorIndicator } = checkUsersOnline(loggedUser, response[i].email);\n          $('.inbox_chat').append(`\n            <a href=\"#\" class=\"startUserChat\" receiverFullName=\"${response[i].fullName}\" receiverEmail=\"${response[i].email}\">\n              <div class=\"chat_list\">\n              <div class=\"chat_people\">\n                <div class=\"chat_img\"><img src=\"images/black_doctor.jpg\" alt=\"${response[i].fullName}\"> </div>\n                <div class=\"chat_ib\">\n                <h5>${response[i].fullName} <span class=\"chat_date ${colorIndicator}\">${userStatus} <span class=\"text-success px-2\">${startPlaySound(response[i].alertMessages)}</span></span></h5>\n                <p>${response[i].facility}</p>\n                </div>\n              </div>\n              </div>\n            </a>\n            `);\n        }\n        // laod active chat\n        autoActiveChat(receiverChat);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        console.log(err.message);\n      }\n    });\n  }\n  // auto chat refresh\n  function autoActiveChat (receiver) {\n    const sender = $('#registerEmail').val();\n    $.ajax({\n      url: urlBase + '/find-senderandreceiver',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { sender: sender, receiver: receiver },\n      success: function (response) {\n        chatHandler(response, sender);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n  // notificationMessages\n  function notificationMessages () {\n    const sender = $('#registerEmail').val();\n    $.ajax({\n      url: urlBase + '/find-receiver',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { receiver: sender, chatStatus: 'sent' },\n      success: function (response) {\n        $('#messageCenter').empty();\n        for (let i = 0; i < response.length; i++) {\n          $('#messageCenter').append(`<a class=\"dropdown-item d-flex align-items-center\" href=\"/patient-chat-selection\">\n              <div class=\"dropdown-list-image mr-3\">\n                <img class=\"rounded-circle\" src=\"images/patient_logo.png\" alt=\"\">\n                <div class=\"status-indicator bg-success\"></div>\n              </div>\n              <div class=\"font-weight-bold\">\n                <div class=\"text-truncate\">${checkFileAttachment(response[i].messageBody, response[i].originalFile, response[i].fileName)}</div>\n                <div class=\"small text-gray-500\">${response[i].sender}</div>\n              </div>\n          </a>`);\n        }\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n\n    $.ajax({\n      url: urlBase + '/top-dashboard-data',\n      method: 'GET',\n      contentType: 'application/json',\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      data: { registerEmail: sender },\n      success: function (response) {\n        $('.countNot').html(response[0].unreadMessages);\n        $('.unread-messages').html(response[0].unreadMessages);\n        $('.belt-data').html(response[0].wekebereBelts);\n        $('.contraction-data').html(response[0].contraction);\n        $('.fhr-data').html(response[0].fhr);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        alert(err.message);\n      }\n    });\n  }\n  $('#uploadIcon').click(function () {\n    $(this).next().trigger('click');\n  });\n\n  $('#chatFile').change(function () {\n    const $chatFile = $('#chatFile');\n    const fileSelected = $chatFile.prop('files')[0];\n    const $uploadMessage = $('.upload_message');\n    const sender = $('#registerEmail').val();\n    const receiver = $('#chatReceiver').val();\n\n    if ($chatFile.val() === '') {\n      return;\n    }\n\n    $uploadMessage.html('Uploading');\n    $uploadMessage.show();\n    const formData = new FormData();\n    formData.append('attachFile', fileSelected);\n    formData.append('sender', sender);\n    formData.append('receiver', receiver);\n    $.ajax({\n      url: urlBase + '/attach-user-chat',\n      method: 'POST',\n      data: formData,\n      crossDomain: true,\n      xhrFields: { withCredentials: true },\n      beforeSend (xhr) {\n        xhr.setRequestHeader('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n      },\n      processData: false,\n      contentType: false,\n      success: function (response) {\n        $uploadMessage.html('Success');\n        $chatFile.val(null);\n        setTimeout(\n          function () {\n            $uploadMessage.hide();\n          }, 5000);\n      },\n      error: function (xhr) {\n        // eslint-disable-next-line no-eval\n        const err = eval(`(${xhr.responseText})`); // FIXME: Remove use of `eval` as it's considered really bad.\n        $uploadMessage.html(err.message);\n      }\n    });\n  });\n  // file download\n  $('.msg_history').on('click', '.file-down', function () {\n    const fileName = $(this).attr('fileName');\n    window.location.href = loggedInUrl + `/download?fileName=${fileName}`;\n  });\n\n  $('#startViewVideo').click(function (event) {\n    event.preventDefault();\n    const left = ($(window).width() / 2) - (900 / 2);\n    const top = ($(window).height() / 2) - (600 / 2);\n    window.open($(this).attr('href'), 'popupWindow', 'width=1000,height=700,top=' + top + ', left=' + left + ',scrollbars=yes');\n  });\n})(jQuery);\n"]}